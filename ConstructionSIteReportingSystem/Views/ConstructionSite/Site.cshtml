@model SiteQueryModel

@{
	ViewData["Title"] = Model.SiteName;

	var siteStages = Model.StagesWithWorks;
	int i = 1;
}

<div class="mb-5">
	<h3 class="text-center">@ViewData["Title"]</h3>
</div>

<form method="get">
	<div class="row">
		<div class="form-group col-md-3 d-flex justify-content-between">
			<div class="form-group">
				<label asp-for="Stage"></label>
				<select asp-for="Stage" class="form-control">
					<option value="">All</option>
					@foreach (var stage in Model.StagesWithWorks)
					{
						<option value="@stage.Name">@stage.Name</option>
					}
				</select>
			</div>
		</div>

		<div class="form-group col-md-3">
			<label asp-for="SearchDate"></label>
			<input asp-for="SearchDate" class="form-control" placeholder="Enter date in format: @DateTime.UtcNow.ToString(DateTimeFormat, CultureInfo.InvariantCulture)">
		</div>

		<div class="form-group col-md-3">
			<div class="form-group">
				<label asp-for="Sorting"></label>
				<select asp-for="Sorting" class="form-control">
					<option value="0">Newest</option>
					<option value="1">Oldest</option>
				</select>
			</div>
		</div>

		<div class="col-md-3">
			<div class="form-group mt-4 p-2">
				<input type="submit" value="Filter" class="btn btn-outline-primary" />
			</div>
		</div>
	</div>
</form>


<table class="table table-hover">
	<thead>
		<tr>
			<th scope="col">#</th>
			<th scope="col">Carryout date</th>
			<th scope="col">Type</th>
			<th scope="col">Description</th>
			<th scope="col">Contractor</th>
			<th scope="col">Quantity</th>
			<th scope="col">Unit</th>
			<th scope="col">Cost per unit</th>
			<th scope="col">Total cost</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var stage in siteStages)
		{
			foreach (var work in stage.Works)
			{
				<tr>
					<th scope="row">@(i++)</th>
					<td>@work.CarryOutDate.ToString(DateTimeFormat, CultureInfo.InvariantCulture)</td>
					<td>@work.WorkName</td>
					<td>@work.Description</td>
					<td>@work.Contractor</td>
					<td>@work.Quantity</td>
					<td>@work.Unit</td>
					<td>@work.CostPerUnit</td>
					<td>@work.TotalCost</td>
				</tr>
			}
		}
	</tbody>
</table>